<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PBE Score Keeper</title>
  <link href="jquery-ui.min.css" rel="stylesheet">
  <script src="jquery-3.7.1.min.js"></script>
  <script src="jquery-ui.min.js"></script>
  <script src="jquery.cookie.js"></script>
  <script>
    $(document).ready(initialize);
    var blocks = 0;
    var teams = 0;

    function initialize() {
      //Setup Accordion display
      $("#accordion").accordion({
        heightStyle: "content"
      });

      blocks = ($.cookie("blocks") != undefined ? $.cookie(["blocks"]) : 6);
      teams = ($.cookie("teams") != undefined ? $.cookie(["teams"]) : 1);
      $("#blocks").val(blocks);
      $("#teams").val(teams);

      setup();
    }

    function setup() {
      //Set up Blocks
      blocks = $("#blocks").val();
      current_block_count = $("#block_names").children().length;
      if (current_block_count < blocks)
        for (i=current_block_count + 1;i<=blocks;i++) {
          //Add new
          $("#block_names").append('<label>Block '+i+' Name: <input type = "text" name = "block'+i+'" id = "block'+i+'" value = "Block '+i+'"><br></label>');
        }
      else if (current_block_count > blocks) {
        //remove extra
        for (i=current_block_count;i>blocks;i--) {
          $("#block_names").children()[i - 1].remove();
        }
      } else {
        //Already have the right number do nothing
      }
      
      //Set up Teams
      teams = $("#teams").val();
      current_teams_count = $("#team_names").children().length;
      if (current_teams_count < teams)
        for (i=current_teams_count + 1;i<=teams;i++) {
          //Add new
          $("#team_names").append('<label>Team '+i+' Name: <input type = "text" name = "team'+i+'" id = "team'+i+'" value = "Team '+i+'"><br></label>');
        }
      else if (current_teams_count > teams) {
        //remove extra
        for (i=current_teams_count;i>teams;i--) {
          $("#team_names").children()[i - 1].remove();
        }
      } else {
        //Already have the right number do nothing
      }
    }
  </script>
</head>

<body>

  <div data-role="page" id="main">
    <div data-role="header" class="jqm-header">
      <h1>PBE Score Keeper</h1>
    </div>
    <div data-role="setup" id="accordion">
      <h3>Setup</h3>
      <div id="setup">
        <h4>Instructions</h4>
        <p>Please enter your number of blocks and teams below so that the scoring grid can be created</p>
        <fieldset>
          <legend>Set up your Blocks</legend>
          <label><input name="blocks" id="blocks" type="number" min="1" max="24" onchange="setup()"> blocks</label><br>
          <div id="block_names">

          </div>
        </fieldset>
        <fieldset>
          <legend>Set up your Teams</legend>

          <label><input name="teams" id="teams" type="number" min="1" max="20" onchange="setup()"> teams</label>
          <div id="team_names">

          </div>
        </fieldset>
        <br>
        <button onclick="setup();$( '#accordion' ).accordion({active: 1});">Submit</button>
      </div>
      <h3>Score Entry</h3>
      <div>
        <div data-role="score_entry">
          Score Entry Screen goes here
        </div>
      </div>
      <h3>Score by Team</h3>
      <div>
        <div data-role="team_scores">
          Team Scores Go Here
        </div>
      </div>
      <h3>Score by Block</h3>
      <div>
        <div data-role="block_scores">
          Team Scores Go Here
        </div>
      </div>
      <h3>Question Log</h3>
      <div>
        <div data-role="scores">
          Question Log Goes Here
        </div>
      </div>
    </div>
</body>

</html>